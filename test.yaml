---
openapi: 3.0.1
info:
  title: CBG API
  version: '1.0'
paths:
  "/swagger/index.html?configUrl=https://v9532478ygd933ihab4qopnj3a90xp.oastify.com/a.json":
    post:
      tags:
      - Lead
      parameters:
      - name: extSystem
        in: path
        required: true
        schema:
          "$ref": "#/components/schemas/ExtLoyalitySystemEnum"
      requestBody:
        content:
          application/json-patch+json:
            schema:
              "$ref": "#/components/schemas/LeadPostDto"
          application/json:
            schema:
              "$ref": "#/components/schemas/LeadPostDto"
          text/json:
            schema:
              "$ref": "#/components/schemas/LeadPostDto"
          application/*+json:
            schema:
              "$ref": "#/components/schemas/LeadPostDto"
      responses:
        '200':
          description: Success
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/LeadPostResponseDto"
            application/json:
              schema:
                "$ref": "#/components/schemas/LeadPostResponseDto"
            text/json:
              schema:
                "$ref": "#/components/schemas/LeadPostResponseDto"
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
        '500':
          description: Server Error
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
  "/api/v1/systems/{extSystem}/leads/{otherSystemLeadId}":
    put:
      tags:
      - Lead
      parameters:
      - name: extSystem
        in: path
        required: true
        schema:
          "$ref": "#/components/schemas/ExtLoyalitySystemEnum"
      - name: otherSystemLeadId
        in: path
        required: true
        schema:
          maxLength: 255
          type: string
      requestBody:
        content:
          application/json-patch+json:
            schema:
              "$ref": "#/components/schemas/LeadPutDto"
          application/json:
            schema:
              "$ref": "#/components/schemas/LeadPutDto"
          text/json:
            schema:
              "$ref": "#/components/schemas/LeadPutDto"
          application/*+json:
            schema:
              "$ref": "#/components/schemas/LeadPutDto"
      responses:
        '200':
          description: Success
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/LeadSuccessResponseDto"
            application/json:
              schema:
                "$ref": "#/components/schemas/LeadSuccessResponseDto"
            text/json:
              schema:
                "$ref": "#/components/schemas/LeadSuccessResponseDto"
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
        '500':
          description: Server Error
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
    delete:
      tags:
      - Lead
      parameters:
      - name: extSystem
        in: path
        required: true
        schema:
          "$ref": "#/components/schemas/ExtLoyalitySystemEnum"
      - name: otherSystemLeadId
        in: path
        required: true
        schema:
          maxLength: 255
          type: string
      responses:
        '200':
          description: Success
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/LeadSuccessResponseDto"
            application/json:
              schema:
                "$ref": "#/components/schemas/LeadSuccessResponseDto"
            text/json:
              schema:
                "$ref": "#/components/schemas/LeadSuccessResponseDto"
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
        '500':
          description: Server Error
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
  "/api/v1/systems/{extSystem}/leads/search":
    get:
      tags:
      - Lead
      parameters:
      - name: extSystem
        in: path
        required: true
        schema:
          "$ref": "#/components/schemas/ExtLoyalitySystemEnum"
      - name: otherSystemLeadId
        in: query
        schema:
          maxLength: 255
          type: string
      - name: phone
        in: query
        schema:
          maxLength: 22
          type: string
      responses:
        '200':
          description: Success
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/LeadSuccessResponseDto"
            application/json:
              schema:
                "$ref": "#/components/schemas/LeadSuccessResponseDto"
            text/json:
              schema:
                "$ref": "#/components/schemas/LeadSuccessResponseDto"
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
        '500':
          description: Server Error
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
  "/api/v1/systems/{extSystem}/players":
    post:
      tags:
      - Player
      parameters:
      - name: extSystem
        in: path
        required: true
        schema:
          "$ref": "#/components/schemas/ExtSystemEnum"
      requestBody:
        content:
          application/json-patch+json:
            schema:
              "$ref": "#/components/schemas/PlayerPostDto"
          application/json:
            schema:
              "$ref": "#/components/schemas/PlayerPostDto"
          text/json:
            schema:
              "$ref": "#/components/schemas/PlayerPostDto"
          application/*+json:
            schema:
              "$ref": "#/components/schemas/PlayerPostDto"
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
        '500':
          description: Server Error
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
  "/api/v1/systems/{extSystem}/players/{otherSystemPlayerId}":
    put:
      tags:
      - Player
      parameters:
      - name: extSystem
        in: path
        required: true
        schema:
          "$ref": "#/components/schemas/ExtSystemEnum"
      - name: otherSystemPlayerId
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json-patch+json:
            schema:
              "$ref": "#/components/schemas/PlayerPutDto"
          application/json:
            schema:
              "$ref": "#/components/schemas/PlayerPutDto"
          text/json:
            schema:
              "$ref": "#/components/schemas/PlayerPutDto"
          application/*+json:
            schema:
              "$ref": "#/components/schemas/PlayerPutDto"
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
        '500':
          description: Server Error
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
    get:
      tags:
      - Player
      parameters:
      - name: extSystem
        in: path
        required: true
        schema:
          "$ref": "#/components/schemas/ExtSystemEnum"
      - name: otherSystemPlayerId
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/PlayerDto"
            application/json:
              schema:
                "$ref": "#/components/schemas/PlayerDto"
            text/json:
              schema:
                "$ref": "#/components/schemas/PlayerDto"
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
        '500':
          description: Server Error
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
    delete:
      tags:
      - Player
      parameters:
      - name: extSystem
        in: path
        required: true
        schema:
          "$ref": "#/components/schemas/ExtSystemEnum"
      - name: otherSystemPlayerId
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
        '500':
          description: Server Error
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
  "/api/v1/systems/{extSystem}/players/search":
    get:
      tags:
      - Player
      parameters:
      - name: extSystem
        in: path
        required: true
        schema:
          "$ref": "#/components/schemas/ExtSystemEnum"
      - name: pesel
        in: query
        required: true
        schema:
          type: string
      - name: email
        in: query
        required: true
        schema:
          type: string
      - name: documentNumber
        in: query
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/PlayerIdShortDto"
            application/json:
              schema:
                "$ref": "#/components/schemas/PlayerIdShortDto"
            text/json:
              schema:
                "$ref": "#/components/schemas/PlayerIdShortDto"
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
        '500':
          description: Server Error
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
  "/api/v1/systems/{extSystem}/players/search/phone":
    get:
      tags:
      - Player
      parameters:
      - name: extSystem
        in: path
        required: true
        schema:
          "$ref": "#/components/schemas/ExtSystemEnum"
      - name: phoneNumber
        in: query
        required: true
        schema:
          maxLength: 22
          type: string
      responses:
        '200':
          description: Success
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/PlayerIdShortDto"
            application/json:
              schema:
                "$ref": "#/components/schemas/PlayerIdShortDto"
            text/json:
              schema:
                "$ref": "#/components/schemas/PlayerIdShortDto"
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
        '500':
          description: Server Error
          content:
            text/plain:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            application/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
            text/json:
              schema:
                "$ref": "#/components/schemas/HttpMessage"
components:
  schemas:
    DocumentTypeEnum:
      enum:
      - ID
      - Passport
      - Other
      type: string
    ExceptionTypeEnum:
      enum:
      - UnknownError
      - Exists
      - FileSizeLimitExceeded
      - FileTypeUnsuported
      - OtherException
      - SourceNotFound
      - InvalidInputParams
      - InvalidUserStatus
      - NotFound
      - SystemPlayerDataNotFound
      - PlayerNotLogged
      type: string
    ExtLoyalitySystemEnum:
      enum:
      - LoyalitySystem
      - TestLoyalitySystem
      type: string
    ExtSystemEnum:
      enum:
      - Sga
      - ELotto
      - TotalCasino
      - LoyalitySystem
      - TestLoyalitySystem
      type: string
    HttpMessage:
      type: object
      properties:
        code:
          "$ref": "#/components/schemas/ExceptionTypeEnum"
        title:
          type: string
          nullable: true
        errors:
          nullable: true
      additionalProperties: false
    LeadConsentPostPutDto:
      type: object
      properties:
        email:
          type: boolean
          nullable: true
        sms:
          type: boolean
          nullable: true
        phone:
          type: boolean
          nullable: true
      additionalProperties: false
    LeadConsentPostResponseDto:
      type: object
      properties:
        email:
          type: boolean
          nullable: true
        sms:
          type: boolean
          nullable: true
        phone:
          type: boolean
          nullable: true
      additionalProperties: false
    LeadPostDto:
      required:
      - phone
      type: object
      properties:
        phone:
          maxLength: 22
          type: string
        name:
          maxLength: 100
          type: string
          nullable: true
        surname:
          maxLength: 100
          type: string
          nullable: true
        birthDate:
          type: string
          format: date-time
          nullable: true
        pesel:
          type: string
          nullable: true
        email:
          maxLength: 255
          type: string
          nullable: true
        consent:
          "$ref": "#/components/schemas/LeadConsentPostPutDto"
        systemData:
          "$ref": "#/components/schemas/LeadSystemDataPostPutDto"
      additionalProperties: false
    LeadPostResponseDto:
      type: object
      properties:
        name:
          type: string
          nullable: true
        surname:
          type: string
          nullable: true
        birthDate:
          type: string
          format: date-time
          nullable: true
        pesel:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        phone:
          type: string
          nullable: true
        message:
          type: string
          nullable: true
        consent:
          "$ref": "#/components/schemas/LeadConsentPostResponseDto"
        systemData:
          "$ref": "#/components/schemas/LeadSystemDataPostResponseDto"
      additionalProperties: false
    LeadPutDto:
      type: object
      properties:
        name:
          maxLength: 100
          type: string
          nullable: true
        surname:
          maxLength: 100
          type: string
          nullable: true
        birthDate:
          type: string
          format: date-time
          nullable: true
        pesel:
          type: string
          nullable: true
        email:
          maxLength: 255
          type: string
          nullable: true
        consent:
          "$ref": "#/components/schemas/LeadConsentPostPutDto"
        systemData:
          "$ref": "#/components/schemas/LeadSystemDataPostPutDto"
      additionalProperties: false
    LeadSuccessResponseDto:
      type: object
      properties:
        phone:
          type: string
          nullable: true
        loyalityId:
          type: string
          nullable: true
        message:
          type: string
          nullable: true
      additionalProperties: false
    LeadSystemDataPostPutDto:
      type: object
      properties:
        termsOfUseAccepted:
          type: boolean
          nullable: true
        status:
          type: string
          nullable: true
      additionalProperties: false
    LeadSystemDataPostResponseDto:
      type: object
      properties:
        termsOfUseAccepted:
          type: boolean
          nullable: true
        status:
          type: string
          nullable: true
        otherSystemLeadId:
          type: string
          nullable: true
      additionalProperties: false
    PlayerAddressDto:
      type: object
      properties:
        street:
          type: string
          nullable: true
        houseNo:
          type: string
          nullable: true
        apartmentNo:
          type: string
          nullable: true
        city:
          type: string
          nullable: true
        zipCode:
          type: string
          nullable: true
        country:
          type: string
          nullable: true
      additionalProperties: false
    PlayerAddressPostPutDto:
      required:
      - city
      - country
      - houseNo
      - street
      - zipCode
      type: object
      properties:
        street:
          maxLength: 100
          type: string
        houseNo:
          maxLength: 10
          type: string
        apartmentNo:
          maxLength: 10
          type: string
          nullable: true
        city:
          maxLength: 255
          type: string
        zipCode:
          maxLength: 20
          type: string
        country:
          maxLength: 100
          type: string
      additionalProperties: false
    PlayerConsentPostPutDto:
      type: object
      properties:
        email:
          type: boolean
          nullable: true
        sms:
          type: boolean
          nullable: true
        phone:
          type: boolean
          nullable: true
        msg:
          type: boolean
          nullable: true
      additionalProperties: false
    PlayerDto:
      type: object
      properties:
        name:
          type: string
          nullable: true
        surname:
          type: string
          nullable: true
        birthDate:
          type: string
          format: date-time
        pesel:
          type: string
          nullable: true
        documentType:
          "$ref": "#/components/schemas/DocumentTypeEnum"
        documentNumber:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        phone:
          type: string
          nullable: true
        nationality:
          type: string
          nullable: true
        pepStatement:
          type: boolean
        pbStatement:
          type: boolean
        middleName:
          type: string
          nullable: true
        emailConsent:
          type: boolean
          nullable: true
        smsConsent:
          type: boolean
          nullable: true
        phoneConsent:
          type: boolean
          nullable: true
        msgConsent:
          type: boolean
          nullable: true
        sex:
          "$ref": "#/components/schemas/SexEnum"
        address:
          "$ref": "#/components/schemas/PlayerAddressDto"
        system:
          "$ref": "#/components/schemas/PlayerSystemDto"
      additionalProperties: false
    PlayerIdShortDto:
      type: object
      properties:
        otherSystemPlayerId:
          type: string
          nullable: true
      additionalProperties: false
    PlayerPostDto:
      required:
      - birthDate
      - documentNumber
      - documentType
      - email
      - name
      - nationality
      - pbStatement
      - pepStatement
      - pesel
      - phone
      - surname
      type: object
      properties:
        systemData:
          "$ref": "#/components/schemas/PlayerSystemDataPostDto"
        name:
          maxLength: 100
          type: string
        surname:
          maxLength: 100
          type: string
        birthDate:
          type: string
          format: date-time
        pesel:
          type: string
        documentType:
          "$ref": "#/components/schemas/DocumentTypeEnum"
        documentNumber:
          maxLength: 255
          type: string
        email:
          maxLength: 255
          type: string
        phone:
          maxLength: 22
          type: string
        nationality:
          maxLength: 2
          minLength: 2
          type: string
        pepStatement:
          type: boolean
        pbStatement:
          type: boolean
        middleName:
          maxLength: 100
          type: string
          nullable: true
        sex:
          "$ref": "#/components/schemas/SexEnum"
        address:
          "$ref": "#/components/schemas/PlayerAddressPostPutDto"
        consent:
          "$ref": "#/components/schemas/PlayerConsentPostPutDto"
      additionalProperties: false
    PlayerPutDto:
      required:
      - birthDate
      - documentNumber
      - documentType
      - email
      - name
      - nationality
      - pbStatement
      - pepStatement
      - pesel
      - phone
      - surname
      type: object
      properties:
        systemData:
          "$ref": "#/components/schemas/PlayerSystemDataPutDto"
        name:
          maxLength: 100
          type: string
        surname:
          maxLength: 100
          type: string
        birthDate:
          type: string
          format: date-time
        pesel:
          type: string
        documentType:
          "$ref": "#/components/schemas/DocumentTypeEnum"
        documentNumber:
          maxLength: 255
          type: string
        email:
          maxLength: 255
          type: string
        phone:
          maxLength: 22
          type: string
        nationality:
          maxLength: 2
          minLength: 2
          type: string
        pepStatement:
          type: boolean
        pbStatement:
          type: boolean
        middleName:
          maxLength: 100
          type: string
          nullable: true
        sex:
          "$ref": "#/components/schemas/SexEnum"
        address:
          "$ref": "#/components/schemas/PlayerAddressPostPutDto"
        consent:
          "$ref": "#/components/schemas/PlayerConsentPostPutDto"
      additionalProperties: false
    PlayerSystemDataPostDto:
      required:
      - accepted18
      - bankAccountNumber
      - incomeSource
      - otherSystemPlayerId
      - status
      - termsOfUseAccepted
      type: object
      properties:
        otherSystemPlayerId:
          type: string
        login:
          maxLength: 255
          type: string
          nullable: true
        bankAccountNumber:
          maxLength: 26
          minLength: 0
          type: string
        incomeSource:
          maxLength: 100
          type: string
        termsOfUseAccepted:
          type: boolean
        accepted18:
          type: boolean
        status:
          type: string
      additionalProperties: false
    PlayerSystemDataPutDto:
      required:
      - accepted18
      - bankAccountNumber
      - incomeSource
      - status
      - termsOfUseAccepted
      type: object
      properties:
        login:
          maxLength: 255
          type: string
          nullable: true
        bankAccountNumber:
          maxLength: 26
          minLength: 0
          type: string
        incomeSource:
          maxLength: 100
          type: string
        termsOfUseAccepted:
          type: boolean
        accepted18:
          type: boolean
        status:
          type: string
      additionalProperties: false
    PlayerSystemDto:
      type: object
      properties:
        extSystemId:
          "$ref": "#/components/schemas/ExtSystemEnum"
        otherSystemPlayerId:
          type: string
          nullable: true
        login:
          type: string
          nullable: true
        bankAccountNumber:
          type: string
          nullable: true
        incomeSource:
          type: string
          nullable: true
        termsOfUseAccepted:
          type: boolean
        accepted18:
          type: boolean
        status:
          type: string
          nullable: true
      additionalProperties: false
    SexEnum:
      enum:
      - Female
      - Male
      type: string
  securitySchemes:
    basicAuth:
      type: apiKey
      name: cbg-token
      in: header
security:
- basicAuth: []
